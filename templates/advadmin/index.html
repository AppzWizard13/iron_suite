{% load static %}
<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
    <title>Dashboard - Analytics | CodespikeStudio</title>

    <meta name="description" content="" />

    <!-- Favicon -->
    {% comment %} <link rel="icon" type="image/png" href="{% static 'images/favicon.jpg' %}"> {% endcomment %}

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Icons. Uncomment required icon fonts -->
    <link rel="stylesheet" href="{% static 'advadmin/assets/vendor/fonts/boxicons.css' %}" />

    <!-- Core CSS -->
    <link rel="stylesheet" href="{% static 'advadmin/assets/vendor/css/core.css' %}" class="template-customizer-core-css" />
    <link rel="stylesheet" href="{% static 'advadmin/assets/vendor/css/theme-default.css' %}" class="template-customizer-theme-css" />
    <link rel="stylesheet" href="{% static 'advadmin/assets/css/demo.css' %}" />

    <!-- Vendors CSS -->
    <link rel="stylesheet" href="{% static 'advadmin/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css' %}" />

    <link rel="stylesheet" href="{% static 'advadmin/assets/vendor/libs/apex-charts/apex-charts.css' %}" />

    <!-- Page CSS -->

    <!-- Helpers -->
    <script src="{% static 'advadmin/assets/vendor/js/helpers.js' %}"></script>

    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
    <script src="{% static 'advadmin/assets/js/config.js' %}"></script>
    
  </head>

  <style>
		
		/* Define Theme Variables */
    body {
      font-family: 'Poppins', sans-serif !important;
			width: 100%; /* Adjust width to compensate for the scale */
			height: 90%;
			transform-origin: top left; /* Ensure the scaling starts from the top-left corner */
			zoom: 0.8; 
			margin: 0; /* Remove default margin */
			overflow: auto; /* Prevent scrollbars from appearing */
			margin-bottom: -1437px;
		}
    .container-xxl{
      max-width: 2850px  !important;
      
    }
    .toast{
      margin-top: 70px !important;
    }
    .modal-backdrop {
			background-color: transparent !important;
		}


    .container, .container-fluid, .container-xxl, .container-xl, .container-lg, .container-md, .container-sm {
      width: 100%;
      /* padding-right: var(--bs-gutter-x, 1.625rem); */
      /* padding-left: var(--bs-gutter-x, 1.625rem); */
      /* margin-right: 0px !important;
      /* margin-left: 0px !important;
    }
    {% comment %} .card{
      min-height: 900px !important;
    } {% endcomment %}

		h1, h2, h3, h4, h5, h6 {
		font-family: 'Poppins', sans-serif;
		font-weight: 600;
		}
		
		p, span, a, button {
		font-family: 'Poppins', sans-serif;
		font-weight: 400;
		}

  


  </style>

  <style>
    .dot-loader {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 6px;
      height: 65px; /* Same as image height */
    }
  
    .dot-loader span {
      width: 10px;
      height: 10px;
      background-color: #28a745; /* Green dots */
      border-radius: 50%;
      animation: dotBounce 1.4s infinite ease-in-out both;
    }
  
    .dot-loader span:nth-child(1) {
      animation-delay: -0.32s;
    }
  
    .dot-loader span:nth-child(2) {
      animation-delay: -0.16s;
    }
  
    .dot-loader span:nth-child(3) {
      animation-delay: 0;
    }
  
    @keyframes dotBounce {
      0%, 80%, 100% {
        transform: scale(0);
        opacity: 0.3;
      }
      40% {
        transform: scale(1);
        opacity: 1;
      }
    }
  </style>
    <!-- Toast Messages -->
    {% if messages %}
    <div class="position-fixed top-0 end-0 p-3" style="z-index: 1050">
      {% for message in messages %}
      <div class="toast align-items-center text-bg-{% if message.tags == 'error' %}danger{% else %}success{% endif %} border-0 show" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="d-flex">
          <div class="toast-body">
            {{ message }}
          </div>
          <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
      </div>
      {% endfor %}
    </div>
    {% endif %}

  <body>
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar">
      <div class="layout-container">
        <!-- Menu -->

        <aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
          <div class="app-brand demo">

            <a href="{% url 'dashboard' %}" class="app-brand-link">
              <span class="app-brand-logo demo m-3">
                <!-- Dot Loader -->
                <div id="logo-loader" class="dot-loader">
                  <span></span>
                  <span></span>
                  <span></span>
                </div>
            
                <!-- Hidden Image (Will be shown after loading) -->
                <img id="company-logo-svg"
                     alt="Company Logo" 
                     style="width: 185px; height: 65px; object-fit: contain; display: none; margin-left: -5px;" />
              </span>
            </a>
            <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto d-block d-xl-none">
              <i class="bx bx-chevron-left bx-sm align-middle"></i>
            </a>
          </div>

          <div class="menu-inner-shadow"></div>
          <ul class="menu-inner py-1">
          <!-- Dashboard -->
          <li class="menu-header small text-uppercase">
            <span class="menu-header-text">Main {{page_name}}</span>
          </li>
          <li class="menu-item {% if page_name == 'dashboard' %}active{% endif %}">
            <a href="{% url 'dashboard' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-home-circle"></i>
              <div data-i18n="Analytics">Dashboard</div>
            </a>
          </li>

          <!-- Members -->
          <li class="menu-header small text-uppercase">
            <span class="menu-header-text">Members</span>
          </li>
          <li class="menu-item {% if page_name == 'member_registration' %}active{% endif %}">
            <a href="{% url 'member_registration' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-user-plus"></i>
              <div data-i18n="All Members">New Registrations</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'user_list' %}active{% endif %}">
            <a href="{% url 'user_list' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-user-check"></i>
              <div data-i18n="All Members">All Members</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'blocked_users' %}active{% endif %}">
            <a href="{% url 'blocked_users' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-user-x"></i>
              <div data-i18n="Blocked Users">Blocked Users</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'inactive_users' %}active{% endif %}">
            <a href="{% url 'inactive_users' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-user-x"></i>
              <div data-i18n="Blocked Users">Inactive Members</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'manager_Users' %}active{% endif %}">
            <a href="{% url 'staff_by_role' role='Manager' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-id-card"></i>
              <div data-i18n="Staff Members">Staff Members</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'trainer_Users' %}active{% endif %}">
            <a href="{% url 'staff_by_role' role='Trainer' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-run"></i>
              <div data-i18n="Trainers">Trainers</div>
            </a>
          </li>

          <!-- Monitoring -->
          <li class="menu-header small text-uppercase">
            <span class="menu-header-text">Monitoring</span>
          </li>
          <li class="menu-item {% if page_name == 'view_attendance' %}active{% endif %}">
            <a href="{% url 'view_attendance' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-calendar-check"></i>
              <div data-i18n="Attendance">Attendance Monitor</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'attendance_report' %}active{% endif %}">
            <a href="{% url 'attendance_report' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-bar-chart-alt-2"></i>
              <div data-i18n="Attendance Report">Attendance Report</div>
            </a>
          </li>

          <li class="menu-item {% if page_name == 'enrollment_list' %}active{% endif %}">
            <a href="{% url 'enrollment_list' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-user-plus"></i>
              <div data-i18n="Enrollments">Enrollments</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'qr_token_list' %}active{% endif %}">
            <a href="{% url 'qr_token_list' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-qr-scan"></i>
              <div data-i18n="QR Tokens">QR Tokens</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'live_qr' %}active{% endif %}">
            <a href="{% url 'live_qr' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-qr-scan"></i>
              <div data-i18n="Live QR">Live QR</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'checkin_log_list' %}active{% endif %}">
            <a href="{% url 'checkin_log_list' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-log-in-circle"></i>
              <div data-i18n="Check-in Logs">Check-in Logs</div>
            </a>
          </li>

          <!-- Operations -->
          <li class="menu-header small text-uppercase">
            <span class="menu-header-text">Operations</span>
          </li>
          <li class="menu-item {% if page_name == 'workout_programs' %}active{% endif %}">
            <a href="#" class="menu-link">
              <i class="menu-icon tf-icons bx bx-dumbbell"></i>
              <div data-i18n="Workout Programs">Workout Programs</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'diet_plans' %}active{% endif %}">
            <a href="#" class="menu-link">
              <i class="menu-icon tf-icons bx bx-food-tag"></i>
              <div data-i18n="Diet Plans">Diet Plans</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'class_schedules' %}active{% endif %}">
            <a href="{% url 'schedule_list' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-time"></i>
              <div data-i18n="Class Schedules">Class Schedules</div>
            </a>
          </li>
          <!-- Finance -->
          <li class="menu-header small text-uppercase">
            <span class="menu-header-text">Finance</span>
          </li>
          <li class="menu-item {% if page_name == 'package_list' %}active{% endif %}">
            <a href="{% url 'package_list' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-credit-card"></i>
              <div data-i18n="Payments">Packages</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'subscription_orders' %}active{% endif %}">
            <a href="{% url 'subscription_orders' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-bookmark"></i>
              <div data-i18n="Payments">Subscription Orders</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'payment_list' %}active{% endif %}">
            <a href="{% url 'payment_list' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-credit-card"></i>
              <div data-i18n="Payments">Payments</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'renewals' %}active{% endif %}">
            <a href="{% url 'upcoming_renewal_members' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-refresh"></i>
              <div data-i18n="Renewals">Renewals</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'invoices' %}active{% endif %}">
            <a href="#" class="menu-link">
              <i class="menu-icon tf-icons bx bx-file"></i>
              <div data-i18n="Invoices">Invoices</div>
            </a>
          </li>


          <!-- Accounts Management -->
          <li class="menu-header small text-uppercase">
            <span class="menu-header-text">ACCOUNTS MANAGEMENT</span>
          </li>
          <li class="menu-item {% if page_name == 'income_transactions' %}active{% endif %}">
            <a href="{% url 'transaction_list' 'income' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-trending-up"></i>
              <div data-i18n="Manage Banners">Income Transactions</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'expense_transactions' %}active{% endif %}">
            <a href="{% url 'transaction_list' 'expense' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-trending-down"></i>
              <div data-i18n="Manage Reviews">Expense Transactions</div>
            </a>
          </li>

          <!-- Communication -->
          <li class="menu-header small text-uppercase">
            <span class="menu-header-text">Communication</span>
          </li>
          <li class="menu-item {% if page_name == 'notifications' %}active{% endif %}">
            <a href="{% url 'notification_log_list' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-bell"></i>
              <div data-i18n="Notifications">Notifications</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'email_sms' %}active{% endif %}">
            <a href="#" class="menu-link">
              <i class="menu-icon tf-icons bx bx-envelope"></i>
              <div data-i18n="Email & SMS">Email & SMS</div>
            </a>
          </li>

          <!-- Administration -->
          <li class="menu-header small text-uppercase">
            <span class="menu-header-text">Admin</span>
          </li>
          <li class="menu-item {% if page_name == 'gym_admin' %}active{% endif %}">
            <a href="{% url 'staff_by_role' role='Admin' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-run"></i>
              <div data-i18n="Manage GYM Admin">Manage GYM Admin</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'manage_gym' %}active{% endif %}">
            <a href="{% url 'gym_list' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-shield-quarter"></i>
              <div data-i18n="Roles & Permissions">Manage GYM</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'roles_permissions' %}active{% endif %}">
            <a href="#" class="menu-link">
              <i class="menu-icon tf-icons bx bx-shield-quarter"></i>
              <div data-i18n="Roles & Permissions">Roles & Permissions</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'category_list' %}active{% endif %}">
            <a href="{% url 'category_list' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-cog"></i>
              <div data-i18n="Settings">Manage Features</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'review_list' %}active{% endif %}">
            <a href="{% url 'review_list' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-cog"></i>
              <div data-i18n="Settings">Manage Review</div>
            </a>
          </li>

          
          <li class="menu-item {% if page_name == 'settings' %}active{% endif %}">
            <a href="#" class="menu-link">
              <i class="menu-icon tf-icons bx bx-cog"></i>
              <div data-i18n="Settings">Settings</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'system_logs' %}active{% endif %}">
            <a href="#" class="menu-link">
              <i class="menu-icon tf-icons bx bx-file-find"></i>
              <div data-i18n="System Logs">System Logs</div>
            </a>
          </li>

          <!-- Backups -->
          <li class="menu-header small text-uppercase">
            <span class="menu-header-text">Master Settings</span>
          </li>
          <li class="menu-item {% if page_name == 'backup' %}active{% endif %}">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-download"></i>
              <div data-i18n="Backups">BACK UP</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item {% if page_name == 'db_backup' %}active{% endif %}">
                <a href="{% url 'download_database' %}" class="menu-link">
                  <div data-i18n="Database Backup">DB Backup</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'media_backup' %}active{% endif %}">
                <a href="{% url 'download_all_media' %}" class="menu-link"
                  onclick="return confirm('This will download all media files as a ZIP archive. Continue?')">
                  <div data-i18n="Media Backup">Download All Media</div>
                </a>
              </li>
            </ul>
          </li>
          <li class="menu-item {% if page_name == 'system_reset' %}active{% endif %}">
            <a href="{% url 'system_reset' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-support"></i>
              <div data-i18n="System Reset">System Reset</div>
            </a>
          </li>

          <!-- Layouts -->
          <li class="menu-item {% if page_name == 'layouts' %}active{% endif %}">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-layout"></i>
              <div data-i18n="Layouts">Layouts</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item {% if page_name == 'layouts_without_menu' %}active{% endif %}">
                <a href="layouts-without-menu.html" class="menu-link">
                  <div data-i18n="Without menu">Without menu</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'layouts_without_navbar' %}active{% endif %}">
                <a href="layouts-without-navbar.html" class="menu-link">
                  <div data-i18n="Without navbar">Without navbar</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'layouts_container' %}active{% endif %}">
                <a href="layouts-container.html" class="menu-link">
                  <div data-i18n="Container">Container</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'layouts_fluid' %}active{% endif %}">
                <a href="layouts-fluid.html" class="menu-link">
                  <div data-i18n="Fluid">Fluid</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'layouts_blank' %}active{% endif %}">
                <a href="layouts-blank.html" class="menu-link">
                  <div data-i18n="Blank">Blank</div>
                </a>
              </li>
            </ul>
          </li>
          <li class="menu-item {% if page_name == 'account_settings' %}active{% endif %}">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-dock-top"></i>
              <div data-i18n="Account Settings">Account Settings</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item {% if page_name == 'account' %}active{% endif %}">
                <a href="pages-account-settings-account.html" class="menu-link">
                  <div data-i18n="Account">Account</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'account_notifications' %}active{% endif %}">
                <a href="pages-account-settings-notifications.html" class="menu-link">
                  <div data-i18n="Notifications">Notifications</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'account_connections' %}active{% endif %}">
                <a href="pages-account-settings-connections.html" class="menu-link">
                  <div data-i18n="Connections">Connections</div>
                </a>
              </li>
            </ul>
          </li>
          <li class="menu-item {% if page_name == 'authentications' %}active{% endif %}">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-lock-open-alt"></i>
              <div data-i18n="Authentications">Authentications</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item {% if page_name == 'auth_login' %}active{% endif %}">
                <a href="auth-login-basic.html" class="menu-link" target="_blank">
                  <div data-i18n="Basic">Login</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'auth_register' %}active{% endif %}">
                <a href="auth-register-basic.html" class="menu-link" target="_blank">
                  <div data-i18n="Basic">Register</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'auth_forgot_password' %}active{% endif %}">
                <a href="auth-forgot-password-basic.html" class="menu-link" target="_blank">
                  <div data-i18n="Basic">Forgot Password</div>
                </a>
              </li>
            </ul>
          </li>
          <li class="menu-item {% if page_name == 'misc' %}active{% endif %}">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-cube-alt"></i>
              <div data-i18n="Misc">Misc</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item {% if page_name == 'misc_error' %}active{% endif %}">
                <a href="pages-misc-error.html" class="menu-link">
                  <div data-i18n="Error">Error</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'misc_under_maintenance' %}active{% endif %}">
                <a href="pages-misc-under-maintenance.html" class="menu-link">
                  <div data-i18n="Under Maintenance">Under Maintenance</div>
                </a>
              </li>
            </ul>
          </li>
          <li class="menu-header small text-uppercase"><span class="menu-header-text">Components</span></li>
          <li class="menu-item {% if page_name == 'cards' %}active{% endif %}">
            <a href="cards-basic.html" class="menu-link">
              <i class="menu-icon tf-icons bx bx-collection"></i>
              <div data-i18n="Basic">Cards</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'user_interface' %}active{% endif %}">
            <a href="javascript:void(0)" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-box"></i>
              <div data-i18n="User interface">User interface</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item {% if page_name == 'ui_accordion' %}active{% endif %}">
                <a href="ui-accordion.html" class="menu-link">
                  <div data-i18n="Accordion">Accordion</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'ui_alerts' %}active{% endif %}">
                <a href="ui-alerts.html" class="menu-link">
                  <div data-i18n="Alerts">Alerts</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'ui_badges' %}active{% endif %}">
                <a href="ui-badges.html" class="menu-link">
                  <div data-i18n="Badges">Badges</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'ui_buttons' %}active{% endif %}">
                <a href="ui-buttons.html" class="menu-link">
                  <div data-i18n="Buttons">Buttons</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'ui_carousel' %}active{% endif %}">
                <a href="ui-carousel.html" class="menu-link">
                  <div data-i18n="Carousel">Carousel</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'ui_collapse' %}active{% endif %}">
                <a href="ui-collapse.html" class="menu-link">
                  <div data-i18n="Collapse">Collapse</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'ui_dropdowns' %}active{% endif %}">
                <a href="ui-dropdowns.html" class="menu-link">
                  <div data-i18n="Dropdowns">Dropdowns</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'ui_footer' %}active{% endif %}">
                <a href="ui-footer.html" class="menu-link">
                  <div data-i18n="Footer">Footer</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'ui_list_groups' %}active{% endif %}">
                <a href="ui-list-groups.html" class="menu-link">
                  <div data-i18n="List Groups">List groups</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'ui_modals' %}active{% endif %}">
                <a href="ui-modals.html" class="menu-link">
                  <div data-i18n="Modals">Modals</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'ui_navbar' %}active{% endif %}">
                <a href="ui-navbar.html" class="menu-link">
                  <div data-i18n="Navbar">Navbar</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'ui_offcanvas' %}active{% endif %}">
                <a href="ui-offcanvas.html" class="menu-link">
                  <div data-i18n="Offcanvas">Offcanvas</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'ui_pagination_breadcrumbs' %}active{% endif %}">
                <a href="ui-pagination-breadcrumbs.html" class="menu-link">
                  <div data-i18n="Pagination &amp; Breadcrumbs">Pagination &amp; Breadcrumbs</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'ui_progress' %}active{% endif %}">
                <a href="ui-progress.html" class="menu-link">
                  <div data-i18n="Progress">Progress</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'ui_spinners' %}active{% endif %}">
                <a href="ui-spinners.html" class="menu-link">
                  <div data-i18n="Spinners">Spinners</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'ui_tabs_pills' %}active{% endif %}">
                <a href="ui-tabs-pills.html" class="menu-link">
                  <div data-i18n="Tabs &amp; Pills">Tabs &amp; Pills</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'ui_toasts' %}active{% endif %}">
                <a href="ui-toasts.html" class="menu-link">
                  <div data-i18n="Toasts">Toasts</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'ui_tooltips_popovers' %}active{% endif %}">
                <a href="ui-tooltips-popovers.html" class="menu-link">
                  <div data-i18n="Tooltips & Popovers">Tooltips &amp; popovers</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'ui_typography' %}active{% endif %}">
                <a href="ui-typography.html" class="menu-link">
                  <div data-i18n="Typography">Typography</div>
                </a>
              </li>
            </ul>
          </li>

          <!-- Extended UI -->
          <li class="menu-item {% if page_name == 'extended_ui' %}active{% endif %}">
            <a href="javascript:void(0)" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-copy"></i>
              <div data-i18n="Extended UI">Extended UI</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item {% if page_name == 'extended_ui_perfect_scrollbar' %}active{% endif %}">
                <a href="extended-ui-perfect-scrollbar.html" class="menu-link">
                  <div data-i18n="Perfect Scrollbar">Perfect scrollbar</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'extended_ui_text_divider' %}active{% endif %}">
                <a href="extended-ui-text-divider.html" class="menu-link">
                  <div data-i18n="Text Divider">Text Divider</div>
                </a>
              </li>
            </ul>
          </li>

          <li class="menu-item {% if page_name == 'boxicons' %}active{% endif %}">
            <a href="icons-boxicons.html" class="menu-link">
              <i class="menu-icon tf-icons bx bx-crown"></i>
              <div data-i18n="Boxicons">Boxicons</div>
            </a>
          </li>

          <!-- Forms & Tables -->
          <li class="menu-header small text-uppercase"><span class="menu-header-text">Forms &amp; Tables</span></li>
          <li class="menu-item {% if page_name == 'form_elements' %}active{% endif %}">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-detail"></i>
              <div data-i18n="Form Elements">Form Elements</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item {% if page_name == 'forms_basic_inputs' %}active{% endif %}">
                <a href="forms-basic-inputs.html" class="menu-link">
                  <div data-i18n="Basic Inputs">Basic Inputs</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'forms_input_groups' %}active{% endif %}">
                <a href="forms-input-groups.html" class="menu-link">
                  <div data-i18n="Input groups">Input groups</div>
                </a>
              </li>
            </ul>
          </li>
          <li class="menu-item {% if page_name == 'form_layouts' %}active{% endif %}">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-detail"></i>
              <div data-i18n="Form Layouts">Form Layouts</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item {% if page_name == 'form_layouts_vertical' %}active{% endif %}">
                <a href="form-layouts-vertical.html" class="menu-link">
                  <div data-i18n="Vertical Form">Vertical Form</div>
                </a>
              </li>
              <li class="menu-item {% if page_name == 'form_layouts_horizontal' %}active{% endif %}">
                <a href="form-layouts-horizontal.html" class="menu-link">
                  <div data-i18n="Horizontal Form">Horizontal Form</div>
                </a>
              </li>
            </ul>
          </li>
          <li class="menu-item {% if page_name == 'tables' %}active{% endif %}">
            <a href="tables-basic.html" class="menu-link">
              <i class="menu-icon tf-icons bx bx-table"></i>
              <div data-i18n="Tables">Tables</div>
            </a>
          </li>

          <!-- Misc -->
          <li class="menu-header small text-uppercase"><span class="menu-header-text">Misc</span></li>
          <li class="menu-item {% if page_name == 'support' %}active{% endif %}">
            <a href="https://github.com/themeselection/sneat-html-admin-template-free/issues"
              target="_blank"
              class="menu-link">
              <i class="menu-icon tf-icons bx bx-support"></i>
              <div data-i18n="Support">Support</div>
            </a>
          </li>
          <li class="menu-item {% if page_name == 'documentation' %}active{% endif %}">
            <a href="https://themeselection.com/demo/sneat-bootstrap-html-admin-template/documentation/"
              target="_blank"
              class="menu-link">
              <i class="menu-icon tf-icons bx bx-file"></i>
              <div data-i18n="Documentation">Documentation</div>
            </a>
          </li>


          </ul>
        </aside>
        <!-- / Menu -->

        <!-- Layout container -->
        <div class="layout-page">
          <!-- Navbar -->

          <nav
            class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme"
            id="layout-navbar"
          >
            <div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none">
              <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
                <i class="bx bx-menu bx-sm"></i>
              </a>
            </div>

            <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
              <!-- Search -->
              <div class="navbar-nav align-items-center">
                <div class="nav-item d-flex align-items-center">
                  <i class="bx bx-search fs-4 lh-0"></i>
                  <input
                    type="text"
                    class="form-control border-0 shadow-none"
                    placeholder="Search..."
                    aria-label="Search..."
                  />
                </div>
              </div>
              <!-- /Search -->

              <ul class="navbar-nav flex-row align-items-center ms-auto">
                <!-- Place this tag where you want the button to render. -->
                <li class="nav-item lh-1 me-3">
                  <a class="dropdown-item" href="{% url 'home' %}">
                    <i class="bx bx-store me-2"></i>
                    <span class="align-middle">Shop</span>
                  </a>
                </li>

                <!-- User -->
                <li class="nav-item navbar-dropdown dropdown-user dropdown">
                  <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown">
                    <div class="avatar avatar-online" style="position: relative; display: inline-block;">
                      <img src="{% if user.profile_image %}{{ user.profile_image.url }}{% else %}{% static 'advadmin/assets/img/avatars/default-avatar.png' %}{% endif %}" 
                           class="rounded-circle border border-2" 
                           style="width: 40px; height: 40px; object-fit: cover;" 
                           alt="Profile Image" />
                      <span class="status-indicator {% if user.is_active %}online{% else %}offline{% endif %}"></span>
                  </div>
                  
                  </a>
                  <ul class="dropdown-menu dropdown-menu-end">
                    <li>
                      <a class="dropdown-item" href="#">
                        <div class="d-flex">
                          <div class="flex-shrink-0 me-3">
                            <div class="avatar avatar-online">
                              <img src="{% if user.profile_image %}{{ user.profile_image.url }}{% else %}{% static 'advadmin/assets/img/avatars/default-avatar.png' %}{% endif %}"
                              class="rounded-circle border border-2" 
                              style="width: 40px; height: 40px; object-fit: cover;" 
                              alt="Profile Image" />
                            </div>
                          </div>
                          <div class="flex-grow-1">
                            <span class="fw-semibold d-block">{{request.user.first_name}} {{request.user.last_name}}</span>
                            <small class="text-muted">{{user.staff_role}}</small>
                          </div>
                        </div>
                      </a>
                    </li>
                    <li>
                      <div class="dropdown-divider"></div>
                    </li>
                    <li>
                      <a class="dropdown-item" href="{% url 'home' %}">
                        <i class="bx bx-store me-2"></i>
                        <span class="align-middle">Shop</span>
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="{% url 'account_settings' %}">
                        <i class="bx bx-user me-2"></i>
                        <span class="align-middle">My Profile</span>
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="{% url 'business_details' %}">
                        <i class="bx bx-cog me-2"></i>
                        <span class="align-middle">Settings</span>
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="{% url 'configuration_list' %}">
                        <span class="d-flex align-items-center align-middle">
                          <i class="flex-shrink-0 bx bx-credit-card me-2"></i>
                          <span class="flex-grow-1 align-middle">Website Settings</span>
                        </span>
                      </a>
                    </li>
                    <li>
                      <div class="dropdown-divider"></div>
                    </li>
                    <li>
                      <a class="dropdown-item" href="{% url 'logout' %}">
                        <i class="bx bx-power-off me-2"></i>
                        <span class="align-middle">Log Out</span>
                      </a>
                    </li>
                  </ul>
                </li>
                <!--/ User -->
              </ul>
            </div>
          </nav>

          <!-- / Navbar -->
          <!-- Content wrapper -->
          {% block content %}

          <div class="content-wrapper">
            <!-- Content -->

            <div class="container-xxl flex-grow-1 container-p-y">
              <div class="row">
                <div class="col-lg-12 mb-4 order-0">
                  <div class="card">
                    <div class="d-flex align-items-end row">
                      <div class="col-sm-7">
                        <div class="card-body">
                          <h5 class="card-title text-primary">Welcome back, {{request.user.first_name}}  {{request.user.last_name}}! ðŸŽ‰</h5>
                          <p class="mb-4">
                            {{new_signups_today}} new signups today,  <span class="fw-bold">{{attendance_rate}}%</span> attendance rate,</br> 2 expiring memberships.
                          </p>

                          <a href="javascript:;" class="btn btn-sm btn-outline-primary">View Badges</a>
                        </div>
                      </div>
                      <div class="col-sm-5 text-center text-sm-left">
                        <div class="card-body pb-0 px-0 px-md-4">
                          <img
                            src="{% static 'advadmin/assets/img/illustrations/man-with-laptop-light.png' %}"
                            height="140"
                            alt="View Badge User"
                            data-app-dark-img="illustrations/man-with-laptop-dark.png' %}"
                            data-app-light-img="illustrations/man-with-laptop-light.png' %}"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-12 col-md-12 order-1">
                  <div class="row">
                    <!-- Profit Card -->
                    <div class="col-lg-4 col-md-12 col-sm-12 mb-4">
                      <div class="card">
                        <div class="card-body">
                          <div class="card-title d-flex align-items-start justify-content-between">
                            <div class="avatar flex-shrink-0">
                              <img
                                src="{% static 'advadmin/assets/img/icons/unicons/chart-success.png' %}"
                                alt="Profit"
                                class="rounded"
                              />
                            </div>
                            <div class="dropdown">
                              <button
                                class="btn p-0"
                                type="button"
                                id="cardOpt3"
                                data-bs-toggle="dropdown"
                                aria-haspopup="true"
                                aria-expanded="false"
                              >
                                <i class="bx bx-dots-vertical-rounded"></i>
                              </button>
                              <div class="dropdown-menu dropdown-menu-end" aria-labelledby="cardOpt3">
                                <a class="dropdown-item" href="{% url 'user_list' %}">View More</a>
                              </div>
                            </div>
                          </div>
                          <span class="fw-semibold d-block mb-1"> Active Members</span>
                          <h5 class="card-title mb-2">{{active_users_count}}</h5>
                          <small class="text-success fw-semibold"><i class="bx bx-up-arrow-alt"></i>Subscriptions</small>
                        </div>
                      </div>
                    </div>

                    <!-- Total Sales Card -->
                    <div class="col-lg-4 col-md-12 col-sm-12 mb-4">
                      <div class="card">
                        <div class="card-body">
                          <div class="card-title d-flex align-items-start justify-content-between">
                            <div class="avatar flex-shrink-0">
                              <img
                                src="{% static 'advadmin/assets/img/icons/unicons/wallet-info.png' %}"
                                alt="Sales"
                                class="rounded"
                              />
                            </div>
                            <div class="dropdown">
                              <button
                                class="btn p-0"
                                type="button"
                                id="cardOpt6"
                                data-bs-toggle="dropdown"
                                aria-haspopup="true"
                                aria-expanded="false"
                              >
                                <i class="bx bx-dots-vertical-rounded"></i>
                              </button>
                              <div class="dropdown-menu dropdown-menu-end" aria-labelledby="cardOpt6">
                                <a class="dropdown-item" href="{% url 'transaction_list' 'income' %}">View More</a>
                              </div>
                            </div>
                          </div>
                          <span class="fw-semibold d-block mb-1">Current Month Revenue</span>
                          <h5 class="card-title text-nowrap mb-1">{{ current_month_income|floatformat:2 }}  INR</h5>
                          <small class="text-success fw-semibold"><i class="bx bx-up-arrow-alt"></i> {{current_month}}</small>
                        </div>
                      </div>
                    </div>

                    <!-- Completed Payments -->
                    <div class="col-lg-4 col-md-12 col-sm-12 mb-4">
                      <div class="card">
                        <div class="card-body">
                          <div class="card-title d-flex align-items-start justify-content-between">
                            <div class="avatar flex-shrink-0">
                              <img src="{% static 'advadmin/assets/img/icons/unicons/paypal.png' %}" alt="Completed Payments" class="rounded" />
                            </div>
                            <div class="dropdown">
                              <button class="btn p-0" type="button" id="cardOpt4" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="bx bx-dots-vertical-rounded"></i>
                              </button>
                              <div class="dropdown-menu dropdown-menu-end" aria-labelledby="cardOpt4">
                                <a class="dropdown-item" href="javascript:void(0);">View More</a>
                              </div>
                            </div>
                          </div>
                          <span class="fw-semibold d-block mb-1">Total Members</span>
                          <h5 class="card-title text-nowrap mb-2">{{ total_members}}</h5>
                          <small class="text-success fw-semibold"><i class="bx bx-up-arrow-alt"></i> Completed</small>
                        </div>
                      </div>
                    </div>

                  </div>
                </div>

                <div class="col-lg-12 col-md-12 order-1">
                  <div class="row">
                    <!-- Upcoming Dues -->
                    <div class="col-lg-4 col-md-12 col-sm-12 mb-4">
                      <div class="card">
                        <div class="card-body">
                          <div class="card-title d-flex align-items-start justify-content-between">
                            <div class="avatar flex-shrink-0">
                              <img src="{% static 'advadmin/assets/img/icons/unicons/cc-primary.png' %}" alt="Transactions" class="rounded" />
                            </div>
                            <div class="dropdown">
                              <button class="btn p-0" type="button" id="cardOpt1" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="bx bx-dots-vertical-rounded"></i>
                              </button>
                              <div class="dropdown-menu dropdown-menu-end" aria-labelledby="cardOpt1">
                                <a class="dropdown-item" href="{% url 'upcoming_renewal_members' %}">View More</a>
                              </div>
                            </div>
                          </div>
                          <span class="fw-semibold d-block mb-1">Upcoming Renewals</span>
                          <h5 class="card-title mb-2">â‚¹ {{upcoming_renewals_amount|floatformat:2}} INR - {{ upcoming_renewals_count }}</h5>
                          <small class="text-success fw-semibold"><i class="bx bx-up-arrow-alt"></i>Renewals</small>
                        </div>
                      </div>
                    </div>

                    <!-- Pending Dues -->
                    <div class="col-lg-4 col-md-12 col-sm-12 mb-4">
                      <div class="card">
                        <div class="card-body">
                          <div class="card-title d-flex align-items-start justify-content-between">
                            <div class="avatar flex-shrink-0">
                              <img src="{% static 'advadmin/assets/img/icons/unicons/paypal.png' %}" alt="Completed Payments" class="rounded" />
                            </div>
                            <div class="dropdown">
                              <button class="btn p-0" type="button" id="cardOpt4" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="bx bx-dots-vertical-rounded"></i>
                              </button>
                              <div class="dropdown-menu dropdown-menu-end" aria-labelledby="cardOpt4">
                                <a class="dropdown-item" href="javascript:void(0);">View More</a>
                              </div>
                            </div>
                          </div>
                          <span class="fw-semibold d-block mb-1">Pending Renewals</span>
                          <h5 class="card-title text-nowrap mb-2">â‚¹ {{ pending_dues_amount|floatformat:2 }} INR - {{pending_dues_count}} </h5>
                          <small class="text-success fw-semibold"><i class="bx bx-up-arrow-alt"></i>Follow Up</small>
                        </div>
                      </div>
                    </div>

                    <!-- Payment Done -->
                    <div class="col-lg-4 col-md-12 col-sm-12 mb-4">
                      <div class="card">
                        <div class="card-body">
                          <div class="card-title d-flex align-items-start justify-content-between">
                            <div class="avatar flex-shrink-0">
                              <img src="{% static 'advadmin/assets/img/icons/unicons/cc-primary.png' %}" alt="Transactions" class="rounded" />
                            </div>
                            <div class="dropdown">
                              <button class="btn p-0" type="button" id="cardOpt2" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="bx bx-dots-vertical-rounded"></i>
                              </button>
                              <div class="dropdown-menu dropdown-menu-end" aria-labelledby="cardOpt2">
                                <a class="dropdown-item" href="{% url 'payment_list' %}">View More</a>
                              </div>
                            </div>
                          </div>
                          <span class="fw-semibold d-block mb-1">Payment Done</span>
                          <h5 class="card-title mb-2">â‚¹ {{ current_month_income|floatformat:2 }} INR </h5>
                          <small class="text-success fw-semibold"><i class="bx bx-up-arrow-alt"></i>Transactions</small>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>




            <div class="col-lg-12 col-md-12 order-1">
                <!-- Active Membership Trends -->
                <style>
                  #totalRevenueChart,
                  #growthChart {
                    min-height: 150px;
                  }
                </style>
                <div class="col-12 col-lg-12 order-2 order-md-3 order-lg-2 mb-4">
                  <div class="card">
                    <div class="row row-bordered g-0">
                      <div class="col-md-8">
                        <h5 class="card-header m-0 me-2 pb-3">Active Membership Trends</h5>
                        <div id="totalRevenueChart" class="px-2"></div>
                      </div>
                      <div class="col-md-4">
                        <div class="card-body">
                          <div class="text-center">
                            <div class="dropdown">
                              <button
                                class="btn btn-sm btn-outline-primary dropdown-toggle"
                                type="button"
                                id="growthReportId"
                                data-bs-toggle="dropdown"
                                aria-haspopup="true"
                                aria-expanded="false"
                              >
                                {{ current_year }}
                              </button>
                              <div class="dropdown-menu dropdown-menu-end" aria-labelledby="growthReportId">
                                {% for year in years %}
                                  <a class="dropdown-item year-select" data-year="{{ year }}" href="javascript:void(0);">{{ year }}</a>
                                {% endfor %}
                              </div>
                            </div>
                          </div>
                        </div>

                        <div id="growthChart" style="min-height: 260px;"></div>
                        <div class="text-center" id="growthChartLabel" style="font-weight: 500; font-size: 16px;"></div>

                        <div class="text-center fw-semibold pt-3 mb-2">
                          {{ attendance_rate }}% Monthly Attendance Trend
                        </div>

                        <div class="d-flex px-xxl-4 px-lg-2 p-4 gap-xxl-3 gap-lg-1 gap-3 justify-content-between">
                          <div class="d-flex">
                            <div class="me-2">
                              <span class="badge bg-label-primary p-2"><i class="bx bx-dollar text-primary"></i></span>
                            </div>
                            <div class="d-flex flex-column">
                              <small id="thisYearLabel">{{ current_year }}</small>
                              <h6 class="mb-0" id="thisYearEarning">â‚¹{{ this_year_earning|default:0|floatformat:2 }}</h6>
                            </div>
                          </div>
                          <div class="d-flex">
                            <div class="me-2">
                              <span class="badge bg-label-info p-2"><i class="bx bx-wallet text-info"></i></span>
                            </div>
                            <div class="d-flex flex-column">
                              <small id="lastYearLabel">{{ current_year|add:"-1" }}</small>
                              <h6 class="mb-0" id="lastYearEarning">â‚¹{{ last_year_earning|default:0|floatformat:2 }}</h6>
                            </div>
                          </div>
                        </div>

                        <script>
                          // All required dashboard data injected by Django
                          window.yearlyEarnings = {{ yearly_earnings_json|safe }};
                          window.growthYearData = {{ growth_per_year_json|safe }};
                          window.growthYears = {{ years|safe }};
                          window.currentYear = {{ current_year }};
                        </script>
                      </div>


                    </div>
                  </div>
                </div>
              <div class="row">
                <!-- Membership & Subscription Overview -->
                <div class="col-md-4 col-lg-4 col-xl-4 mb-4">
                  <div class="card h-100">
                    <div class="card-header d-flex align-items-center justify-content-between pb-0">
                      <div class="card-title mb-0">
                        <h5 class="m-0 me-2 pb-2">Membership & Subscription Overview</h5>
                        <small class="text-muted">{{ total_members }} Total Members</small>
                      </div>
                      <div class="dropdown">
                        <button
                          class="btn p-0"
                          type="button"
                          id="membershipOverviewDropdown"
                          data-bs-toggle="dropdown"
                          aria-haspopup="true"
                          aria-expanded="false"
                        >
                          <i class="bx bx-dots-vertical-rounded"></i>
                        </button>
                        <div class="dropdown-menu dropdown-menu-end" aria-labelledby="membershipOverviewDropdown">
                          <a class="dropdown-item" href="#">Refresh</a>
                          <a class="dropdown-item" href="#">View Reports</a>
                        </div>
                      </div>
                    </div>

                    <div class="card-body">
                      <div class="d-flex justify-content-between align-items-center mb-3">
                        <div class="d-flex flex-column align-items-center gap-1">
                          <h2 class="mb-2">{{ active_users_count }}</h2>
                          <span>Active Members</span>
                        </div>
                        <div class="text-end">
                          <small class="text-muted">Revenue this month</small>
                          <h6 class="mb-0 text-success">â‚¹{{ current_month_income }}</h6>
                        </div>
                      </div>

                      <ul class="p-0 m-0">
                        <li class="d-flex mb-4 pb-1">
                          <div class="avatar flex-shrink-0 me-3">
                            <span class="avatar-initial rounded bg-label-success"><i class="bx bx-check-circle"></i></span>
                          </div>
                          <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                            <div class="me-2">
                              <h6 class="mb-0">Active Subscriptions</h6>
                              <small class="text-muted">Currently subscribed</small>
                            </div>
                            <div class="user-progress">
                              <small class="fw-semibold">{{ active_users_count }}</small>
                            </div>
                          </div>
                        </li>

                        <li class="d-flex mb-4 pb-1">
                          <div class="avatar flex-shrink-0 me-3">
                            <span class="avatar-initial rounded bg-label-info"><i class="bx bx-user-plus"></i></span>
                          </div>
                          <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                            <div class="me-2">
                              <h6 class="mb-0">New Signups Today</h6>
                              <small class="text-muted">Joined on {{ today|date:"M d" }}</small>
                            </div>
                            <div class="user-progress">
                              <small class="fw-semibold">{{ new_signups_today }}</small>
                            </div>
                          </div>
                        </li>

                        <li class="d-flex mb-4 pb-1">
                          <div class="avatar flex-shrink-0 me-3">
                            <span class="avatar-initial rounded bg-label-warning"><i class="bx bx-timer"></i></span>
                          </div>
                          <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                            <div class="me-2">
                              <h6 class="mb-0">Upcoming Renewals</h6>
                              <small class="text-muted">Due by month-end</small>
                            </div>
                            <div class="user-progress">
                              <small class="fw-semibold">{{ upcoming_renewals_count }}</small>
                            </div>
                          </div>
                        </li>

                        <li class="d-flex mb-4 pb-1">
                          <div class="avatar flex-shrink-0 me-3">
                            <span class="avatar-initial rounded bg-label-danger"><i class="bx bx-credit-card"></i></span>
                          </div>
                          <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                            <div class="me-2">
                              <h6 class="mb-0">Pending Dues</h6>
                              <small class="text-muted">Not renewed this month</small>
                            </div>
                            <div class="user-progress">
                              <small class="fw-semibold">{{ pending_dues_count }}</small>
                            </div>
                          </div>
                        </li>

                        <li class="d-flex">
                          <div class="avatar flex-shrink-0 me-3">
                            <span class="avatar-initial rounded bg-label-secondary"><i class="bx bx-user-x"></i></span>
                          </div>
                          <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                            <div class="me-2">
                              <h6 class="mb-0">Expired Memberships</h6>
                              <small class="text-muted">Need follow-up</small>
                            </div>
                            <div class="user-progress">
                              <small class="fw-semibold">{{ expired_members_count }}</small>
                            </div>
                          </div>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>

                <!-- Revenue - Monthly Overview -->
                <div class="col-md-12 col-lg-8 col-xl-8 mb-4">
                  <div class="card h-100">
                    <div class="card-header">
                      <ul class="nav nav-pills" role="tablist">
                        <h5 class="m-0 me-2">Revenue - Monthly Overview</h5>
                      </ul>
                    </div>
                    <div class="card-body px-0">
                      <div class="tab-content p-0">
                        <div class="tab-pane fade show active" id="navs-tabs-line-card-income" role="tabpanel">
                          <div class="d-flex p-4 pt-3 align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                              <div class="avatar flex-shrink-0 me-3">
                                <img src="{% static 'advadmin/assets/img/icons/unicons/wallet.png' %}" alt="Wallet" />
                              </div>
                              <div>
                                <small class="text-muted d-block">Total Revenue (YTD)</small>
                                <div class="d-flex align-items-center">
                                  <h6 class="mb-0 me-1" id="incomeBalanceAmount">â‚¹0</h6>
                                  <small class="text-success fw-semibold" id="incomeBalanceChange">
                                    <i class="bx bx-chevron-up"></i>
                                    <span>0%</span>
                                  </small>
                                </div>
                                <small class="text-muted">Year: 
                                  <span id="incomeYearLabel">{{ current_year }}</span>
                                  <span class="dropdown">
                                    <a href="#" class="text-primary dropdown-toggle year-select-dropdown" data-bs-toggle="dropdown" aria-expanded="false" style="font-size:0.9em;">
                                      <i class="bx bx-calendar"></i>
                                    </a>
                                    <ul class="dropdown-menu">
                                      {% for y in years %}
                                        <li><a class="dropdown-item year-select" href="#" data-year="{{ y }}">{{ y }}</a></li>
                                      {% endfor %}
                                    </ul>
                                  </span>
                                </small>
                              </div>
                            </div>
                          </div>
                          <div class="px-1">
                            <div id="incomeChart"></div>
                          </div>
                          {% comment %} <div class="d-flex justify-content-center pt-4 gap-2">
                            <div class="flex-shrink-0">
                              <div id="expensesOfWeek"></div>
                            </div>
                            <div>
                              <p class="mb-n1 mt-1">Expenses This Week</p>
                              <small class="text-muted" id="expensesCompare">$39 less than last week</small>
                            </div>
                          </div> {% endcomment %}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Running Class Activities Overview -->
              <div class="col-md-12 col-lg-12 order-2 mb-4">
                <div class="card h-100">
                  <div class="card-header d-flex align-items-center justify-content-between">
                    <h5 class="card-title m-0 me-2">Running Class Activities Overview</h5>
                  </div>
                  <div class="card-body">
                    <ul class="p-0 m-0">
                      {% for class in running_classes %}
                      <li class="d-flex mb-4 pb-1">
                        <div class="avatar flex-shrink-0 me-3">
                          <img src="{% static 'advadmin/assets/img/icons/unicons/chart.png' %}" alt="{{ class.class_name }}" class="rounded" />
                        </div>
                        <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                          <div class="me-2">
                            <small class="text-muted d-block mb-1">{{ class.class_name }} - {{ class.location }}</small>
                            <h6 class="mb-0">Trainer: {{ class.trainer_name }}</h6>
                            <small class="text-muted">{{ class.start_time|time:"h:i A" }} - {{ class.end_time|time:"h:i A" }}</small>
                          </div>
                          <div class="user-progress d-flex align-items-center gap-1">
                            <h6 class="mb-0">{{ class.current_attendance }}/{{ class.max_capacity }}</h6>
                            <span class="text-muted">Attending</span>
                          </div>
                        </div>
                      </li>
                      {% empty %}
                      <li class="text-center text-muted">No live classes right now.</li>
                      {% endfor %}
                    </ul>
                  </div>
                </div>
              </div>
                <!--/ Transactions -->
              </div>
            </div>
            <!-- / Content -->
            {% endblock %}

            <!-- Footer -->
            <footer class="content-footer footer bg-footer-theme">
              <div class="container-xxl d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
                <div class="mb-2 mb-md-0">
                  Â©
                  <script>
                    document.write(new Date().getFullYear());
                  </script>
                  , made with â¤ï¸ by
                  <a href="https://themeselection.com" target="_blank" class="footer-link fw-bolder">CodespikeStudio</a>
                </div>
                {% comment %} <div>
                  <a href="https://themeselection.com/license/" class="footer-link me-4" target="_blank">License</a>
                  <a href="https://themeselection.com/" target="_blank" class="footer-link me-4">More Themes</a>

                  <a
                    href="https://themeselection.com/demo/sneat-bootstrap-html-admin-template/documentation/"
                    target="_blank"
                    class="footer-link me-4"
                    >Documentation</a
                  >

                  <a
                    href="https://github.com/themeselection/sneat-html-admin-template-free/issues"
                    target="_blank"
                    class="footer-link me-4"
                    >Support</a
                  >
                </div> {% endcomment %}
              </div>
            </footer>
            <!-- / Footer -->

            <div class="content-backdrop fade"></div>
          </div>
          <!-- Content wrapper -->
        </div>
        <!-- / Layout page -->
      </div>

      <!-- Overlay -->
      <div class="layout-overlay layout-menu-toggle"></div>
    </div>
    <!-- / Layout wrapper -->

    {% comment %} <div class="buy-now">
      <a
        href="https://themeselection.com/products/sneat-bootstrap-html-admin-template/"
        target="_blank"
        class="btn btn-danger btn-buy-now"
        >Upgrade to Pro</a
      >
    </div> {% endcomment %}

    <!-- Core JS -->
    <!-- build:js assets/vendor/js/core.js -->
    <script>
      const orderStatsData = {
        labels: [
          'Pending', 
          'Processing', 
          'Shipped', 
          'Delivered'
        ],
        series: [
          {{ pending_orders|default:0 }},
          {{ processing_orders|default:0 }},
          {{ shipped_orders|default:0 }},
          {{ delivered_orders|default:0 }}
        ]
      };
    </script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const logoImg = document.getElementById('company-logo-svg');
        const loader = document.getElementById('logo-loader');
        const faviconLink = document.querySelector("link[rel~='icon']");

    
        fetch('/api/company-data/')
          .then(response => response.json())
          .then(data => {
            console.log("Company Data:", data); // Debugging
    
            // âœ… Load the company logo
            if (data.company_logo_svg_url) {
              logoImg.src = data.company_logo_svg_url;
              logoImg.alt = data.company_name + " Logo";
              logoImg.style.display = "block"; // Show image
              loader.style.display = "none"; // Hide loader
            } else {
              loader.innerHTML = "No Logo Available"; // Show text if no logo
            }
    
            // âœ… Load the favicon dynamically
            if (faviconLink && data.company_favicon_url) {
              faviconLink.href = data.company_favicon_url;
            }
          })
          .catch(error => {
            console.error('Error fetching company data:', error);
            loader.innerHTML = "Failed to load logo"; // Show error message
          });
      });
    </script>
    <script>
        window.membershipTrends = {{ membership_trends_json|safe }};
        window.yearlyEarnings = {{ yearly_earnings_json|safe }};
        window.allYears = {{ years|safe }};
        window.currentYear = {{ current_year }};
        document.querySelectorAll('.year-select').forEach(item => {
          item.addEventListener('click', function() {
            var selectedYear = parseInt(this.getAttribute('data-year'));
            var lastYear = selectedYear - 1;
            var trends = window.membershipTrends;
            var earnings = window.yearlyEarnings;

            // Update chart series
            var newSeries = [
              {
                name: String(selectedYear),
                data: trends[selectedYear] || Array(12).fill(0)
              },
              {
                name: String(lastYear),
                data: trends[lastYear] || Array(12).fill(0)
              }
            ];
            window.totalRevenueChart.updateSeries(newSeries);

            // Update labels/amounts
            document.getElementById('thisYearLabel').innerText = selectedYear;
            document.getElementById('lastYearLabel').innerText = lastYear;
            document.getElementById('thisYearEarning').innerText = "â‚¹" + (earnings[selectedYear] || 0).toLocaleString();
            document.getElementById('lastYearEarning').innerText = "â‚¹" + (earnings[lastYear] || 0).toLocaleString();

            // (Optional) Update the button label as well
            document.getElementById('growthReportId').innerText = selectedYear;
          });
        });

    </script>
    <script>
        // For income chart etc.
        window.monthlyRevenue = {{ monthly_revenue_json|safe }};
        window.currentYear = {{ current_year }};
        // For growth progress chart:
    </script>
    <script>
      window.growthYearData = {{ growth_per_year_json|safe }};
      // For reference: {2024: {"percent":0,"count":0}, 2025: {"percent":100,"count":3} }
      window.growthYears = {{ years|safe }};
  </script>

    <script src="{% static 'advadmin/assets/vendor/libs/jquery/jquery.js' %}"></script>
    <script src="{% static 'advadmin/assets/vendor/libs/popper/popper.js' %}"></script>
    <script src="{% static 'advadmin/assets/vendor/js/bootstrap.js' %}"></script>
    <script src="{% static 'advadmin/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js' %}"></script>

    <script src="{% static 'advadmin/assets/vendor/js/menu.js' %}"></script>
    <!-- endbuild -->

    <!-- Vendors JS -->
    <script src="{% static 'advadmin/assets/vendor/libs/apex-charts/apexcharts.js' %}"></script>

    <!-- Main JS -->
    <script src="{% static 'advadmin/assets/js/main.js' %}"></script>

    <!-- Page JS -->
    <script src="{% static 'advadmin/assets/js/dashboards-analytics.js' %}"></script>

    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js' %}"></script>
  </body>
</html>
